# AI 데이터셋 큐레이션 GUI 도구

## 개요

PySide6 기반의 AWS 데이터셋 큐레이션 GUI 애플리케이션입니다. S3에 저장된 이미지 데이터를 효율적으로 관리하고 대표 이미지를 선정할 수 있는 직관적인 인터페이스를 제공합니다.

## 주요 기능

### 🎯 대표 이미지 선정
- **대표 색상**: 정면 누끼, 후면 누끼, 모델 착용샷 (총 3개) 선택
- **기타 색상**: 정면 누끼 (색상별 1개) 선택
- 직관적인 색상 선택 인터페이스
- 이미지 클릭으로 간편한 선정

### 📁 이미지 관리
- **재분류**: 텍스트 포함 이미지를 text 폴더로 이동
- **삭제**: 불필요하거나 품질이 낮은 이미지 제거
- **업로드**: 로컬 이미지를 S3에 업로드
- 일괄 선택 및 처리

### ⚡ 성능 최적화
- **비동기 처리**: GUI 반응성 유지
- **이미지 캐싱**: 로컬 캐시로 빠른 재로딩
- **페이지네이션**: 대용량 데이터 효율 처리
- **작업 상태 저장**: 중단 지점 기억

## 설치 및 실행

### 1. 의존성 설치

```bash
# requirements.txt에서 의존성 설치
pip install -r requirements.txt

# 또는 개별 설치
pip install PySide6 boto3 requests Pillow
```

### 2. AWS 설정

AWS CLI가 설정되어 있거나 환경 변수가 설정되어 있어야 합니다.

```bash
# AWS CLI 설정
aws configure

# 또는 환경 변수 설정
export AWS_ACCESS_KEY_ID=your_access_key
export AWS_SECRET_ACCESS_KEY=your_secret_key
export AWS_DEFAULT_REGION=ap-northeast-2
```

### 3. 설정 파일 확인

`config.json` 파일이 올바르게 설정되어 있는지 확인하세요:

```json
{
  "aws": {
    "region": "ap-northeast-2"
  },
  "s3": {
    "bucket_name": "your-s3-bucket-name"
  },
  "dynamodb": {
    "table_name": "ProductAssets"
  }
}
```

### 4. 애플리케이션 실행

```bash
# GUI 애플리케이션 실행
python gui_main.py

# 또는 패키지로 실행
python -m aws.gui_main
```

## 사용법

### 1. 상품 선택
- 왼쪽 패널에서 상품 목록을 확인
- 상태별 필터링 (PENDING, IN_PROGRESS, COMPLETED)
- 페이지네이션으로 대량 데이터 탐색
- 상품 클릭으로 큐레이션 시작

### 2. 대표 이미지 선정

#### 대표 색상 선택
1. 상단의 "대표 색상" 섹션에서 메인 색상 선택
2. 정면 누끼, 후면 누끼, 모델 착용샷 3개 이미지 선정

#### 기타 색상 처리
1. "현재 작업 색상" 섹션에서 기타 색상 선택
2. 해당 색상의 정면 누끼 1개 이미지만 선정

#### 이미지 선택
- 이미지 클릭으로 대표 이미지 선정
- 선택된 이미지는 녹색 테두리로 표시
- 하단 요약에서 선택 현황 확인

### 3. 이미지 관리

#### 이미지 재분류
1. "이미지 관리" 탭으로 전환
2. 텍스트가 포함된 이미지 선택
3. "텍스트 폴더로 이동" 버튼 클릭

#### 이미지 삭제
1. 불필요한 이미지들 선택 (체크박스)
2. "선택된 이미지 삭제" 버튼 클릭
3. 확인 대화상자에서 승인

### 4. 큐레이션 완료
- 최소 조건 만족 시 "큐레이션 완료" 버튼 활성화
- 버튼 클릭으로 DynamoDB에 결과 저장
- 상품 상태가 "COMPLETED"로 변경

## 화면 구성

### 메인 윈도우
```
┌─────────────────────────────────────────────────────────────┐
│ 파일(F)  도구(T)                                             │
├─────────────┬───────────────────────────────────────────────┤
│  상품 목록   │              큐레이션 작업 영역                │
│             │                                              │
│ ┌─────────┐ │ ┌─────────────── 색상 선택 ───────────────┐   │
│ │ 상품1   │ │ │ 대표 색상: [Black] [White] [Gray]      │   │
│ │ PENDING │ │ │ 현재 작업: [Black] [White] [Gray]      │   │
│ └─────────┘ │ └─────────────────────────────────────────┘   │
│ ┌─────────┐ │                                              │
│ │ 상품2   │ │ ┌─── 대표 이미지 선정 ────┐ ┌─ 이미지 관리 ─┐ │
│ │COMPLETED│ │ │ [IMG] [IMG] [IMG] [IMG] │ │ [☑IMG] [☐IMG] │ │
│ └─────────┘ │ │ [IMG] [IMG] [IMG] [IMG] │ │ [☐IMG] [☑IMG] │ │
│             │ └─────────────────────────┘ └───────────────┘ │
│ [이전][다음] │                                              │
│             │ 선택된 대표 이미지: 3개    [큐레이션 완료]     │
├─────────────┴───────────────────────────────────────────────┤
│ 연결 상태: 정상                               준비 완료      │
└─────────────────────────────────────────────────────────────┘
```

## 키보드 단축키

- `F5`: 데이터 새로고침
- `Ctrl+Q`: 애플리케이션 종료

## 문제 해결

### AWS 연결 오류
- AWS 자격 증명 확인
- 인터넷 연결 상태 확인
- S3 버킷 및 DynamoDB 테이블 존재 여부 확인
- IAM 권한 확인 (S3: GetObject, ListBucket / DynamoDB: Query, UpdateItem)

### 이미지 로딩 실패
- S3 버킷의 객체 접근 권한 확인
- 네트워크 연결 상태 확인
- 캐시 정리 후 재시도 (도구 > 캐시 정리)

### 성능 최적화
- 캐시 크기 조정 (`ImageCache` 생성 시 `max_cache_size_mb` 파라미터)
- 페이지 크기 조정 (`ProductLoadThread`의 `limit` 파라미터)
- 불필요한 캐시 정리 (도구 > 캐시 정리)

## 로그 확인

애플리케이션 실행 중 발생하는 로그는 콘솔에 출력됩니다:

```bash
# 디버그 로그까지 모두 확인
python gui_main.py --log-level DEBUG

# 로그 파일로 저장
python gui_main.py 2>&1 | tee curation_gui.log
```

## 개발자 정보

- **버전**: 1.0.0
- **개발팀**: AI Data Team
- **문의**: 이슈 생성을 통해 문의해주세요 